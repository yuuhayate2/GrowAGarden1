local Players = game:GetService("Players")
local PlayerGui = Players.LocalPlayer:WaitForChild("PlayerGui")

-- üîÑ Loading Screen
local loadingGui = Instance.new("ScreenGui")
loadingGui.Name = "LoadingScreen"
loadingGui.ResetOnSpawn = false
loadingGui.Parent = PlayerGui

local loadingFrame = Instance.new("Frame")
loadingFrame.Size = UDim2.new(1, 0, 1, 0)
loadingFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
loadingFrame.BorderSizePixel = 0
loadingFrame.Parent = loadingGui

-- K Logo
local logoLabel = Instance.new("TextLabel")
logoLabel.Size = UDim2.new(0, 120, 0, 120)
logoLabel.Position = UDim2.new(0.5, -60, 0.4, -60)
logoLabel.BackgroundTransparency = 1
logoLabel.Text = "K"
logoLabel.TextColor3 = Color3.fromRGB(255, 50, 50)
logoLabel.Font = Enum.Font.GothamBlack
logoLabel.TextScaled = true
logoLabel.Parent = loadingFrame

-- Animate Logo Pulse (single loop, not infinite)
task.spawn(function()
	for t = 1, 20 do
		local scale = 10 * math.sin(t/2)
		logoLabel.Size = UDim2.new(0, 120 + scale, 0, 120 + scale)
		task.wait(0.1)
	end
end)

-- Loading Text
local loadingText = Instance.new("TextLabel")
loadingText.Size = UDim2.new(0, 350, 0, 50)
loadingText.Position = UDim2.new(0.5, -175, 0.6, 0)
loadingText.BackgroundTransparency = 1
loadingText.TextColor3 = Color3.new(1, 1, 1)
loadingText.Font = Enum.Font.SourceSansBold
loadingText.TextSize = 24
loadingText.Text = "üîÑ Generating Egg Predictor"
loadingText.Parent = loadingFrame

-- Animate Dots
local running = true
task.spawn(function()
	while running do
		for i = 0, 3 do
			loadingText.Text = "üîÑ Generating Egg Predictor" .. string.rep(".", i)
			task.wait(0.4)
		end
	end
end)

-- Wait 10 seconds
task.wait(10)
running = false

for i = 0, 1, 0.05 do
	loadingFrame.BackgroundTransparency = i
	logoLabel.TextTransparency = i
	loadingText.TextTransparency = i
	task.wait(0.03)
end
loadingGui:Destroy()

-- Egg/Pet Data
local eggToPets = {
	["Common Egg"]     = {"Dog", "Golden Lab", "Bunny"},
	["Uncommon Egg"]   = {"Black Bunny", "Cat", "Chicken", "Deer"},
	["Rare Egg"]       = {"Monkey", "Orange Tabby", "Pig", "Rooster", "Spotted Deer"},
	["Legendary Egg"]  = {"Cow", "Silver Monkey", "Sea Otter", "Turtle", "Polar Bear"},
	["Mythical Egg"]   = {"Grey Mouse", "Brown Mouse", "Squirrel", "Red Giant Ant", "Red Fox"},
	["Bug Egg"]        = {"Snail", "Giant Ant", "Caterpillar", "Praying Mantis", "Dragonfly"},
	["Bee Egg"]        = {"Bee", "Honey Bee", "Bear Bee", "Petal Bee", "Queen Bee"},
	["Paradise Egg"]   = {"Ostrich", "Peacock", "Capybara", "Scarlet Macaw", "Mimic Octopus"},
	["Oasis Egg"]      = {"Meerkat", "Sand Snake", "Axolotl", "Hyacinth Macaw"},
}

local espList = {}

local function clearESP()
	for _, gui in ipairs(espList) do
		if gui and gui.Parent then
			gui:Destroy()
		end
	end
	espList = {}
end

local function createESP(part, petName, isHatchable)
	if part then
		local gui = Instance.new("BillboardGui")
		gui.Name = "EggESP"
		gui.Size = UDim2.new(0, 100, 0, 40)
		gui.StudsOffset = Vector3.new(0, 2.5, 0)
		gui.AlwaysOnTop = true
		gui.Parent = part

		local label = Instance.new("TextLabel")
		label.Size = UDim2.new(1, 0, 0.6, 0)
		label.BackgroundTransparency = 1
		label.Text = petName
		label.TextColor3 = Color3.new(1, 1, 1)
		label.TextStrokeTransparency = 0.5
		label.Font = Enum.Font.SourceSansBold
		label.TextScaled = true
		label.Parent = gui

		local status = Instance.new("TextLabel")
		status.Size = UDim2.new(1, 0, 0.4, 0)
		status.Position = UDim2.new(0, 0, 0.6, 0)
		status.BackgroundTransparency = 1
		status.Text = isHatchable and "‚úÖ Hatchable" or "‚ùå Not Hatchable"
		status.TextColor3 = isHatchable and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
		status.Font = Enum.Font.SourceSans
		status.TextScaled = true
		status.Parent = gui

		table.insert(espList, gui)
	end
end

local function getRandomPet(eggName)
	local pool = eggToPets[eggName]
	if pool then
		return pool[math.random(1, #pool)]
	end
	return "Unknown"
end

local function randomizeEggs()
	clearESP()
	for _, obj in ipairs(workspace:GetDescendants()) do
		if obj:IsA("Model") and eggToPets[obj.Name] then
			local part = obj:FindFirstChildWhichIsA("BasePart")
			if part then
				local petName = getRandomPet(obj.Name)
				local isHatchable = math.random() > 0.5
				createESP(part, petName, isHatchable)
			end
		end
	end
end

-- üåà RGB function
local rgbRunning = false
local function startRGB(btn)
	rgbRunning = true
	task.spawn(function()
		local h = 0
		while rgbRunning do
			h = (h + 0.01) % 1
			btn.BackgroundColor3 = Color3.fromHSV(h, 1, 1)
			task.wait(0.02)
		end
	end)
end

-- üì¶ GUI
local gui = Instance.new("ScreenGui", PlayerGui)
gui.Name = "EggESP_UI"
gui.ResetOnSpawn = false

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0, 200, 0, 120)
frame.Position = UDim2.new(0.01, 0, 0.35, 0)
frame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true

local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1, -40, 0.25, 0)
title.Position = UDim2.new(0, 5, 0, 0)
title.BackgroundTransparency = 1
title.Text = "Pet Predictor By Kuni"
title.TextColor3 = Color3.new(1, 1, 1)
title.Font = Enum.Font.SourceSans
title.TextSize = 18
title.TextXAlignment = Enum.TextXAlignment.Left

-- ‚ùå Close
local exitBtn = Instance.new("TextButton", frame)
exitBtn.Size = UDim2.new(0, 20, 0, 20)
exitBtn.Position = UDim2.new(1, -22, 0, 2)
exitBtn.Text = "‚ùå"
exitBtn.BackgroundColor3 = Color3.fromRGB(180, 50, 50)
exitBtn.TextColor3 = Color3.new(1, 1, 1)
exitBtn.Font = Enum.Font.SourceSans
exitBtn.TextSize = 14

-- ‚ûñ Minimize
local minBtn = Instance.new("TextButton", frame)
minBtn.Size = UDim2.new(0, 20, 0, 20)
minBtn.Position = UDim2.new(1, -44, 0, 2)
minBtn.Text = "‚Äì"
minBtn.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
minBtn.TextColor3 = Color3.new(1, 1, 1)
minBtn.Font = Enum.Font.SourceSans
minBtn.TextSize = 18

-- üî≥ Restore
local minimizedIcon = Instance.new("TextButton", gui)
minimizedIcon.Size = UDim2.new(0, 120, 0, 30)
minimizedIcon.Position = UDim2.new(0, 10, 1, -40)
minimizedIcon.Text = "üì¶ Open Pet Predictor"
minimizedIcon.Visible = false
minimizedIcon.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
minimizedIcon.TextColor3 = Color3.new(1, 1, 1)
minimizedIcon.Font = Enum.Font.SourceSans
minimizedIcon.TextSize = 14

-- üîÅ Random Button
local randomBtn = Instance.new("TextButton", frame)
randomBtn.Size = UDim2.new(0.9, 0, 0.5, 0)
randomBtn.Position = UDim2.new(0.05, 0, 0.4, 0)
randomBtn.Text = "Randomize Pets"
randomBtn.BackgroundColor3 = Color3.fromRGB(80, 130, 255)
randomBtn.TextColor3 = Color3.new(1, 1, 1)
randomBtn.Font = Enum.Font.SourceSans
randomBtn.TextSize = 14

-- Debounce
local debounce = false
randomBtn.MouseButton1Click:Connect(function()
	if debounce then return end
	debounce = true
	randomBtn.Text = "Please wait..."
	startRGB(randomBtn)
	randomizeEggs()
	task.wait(2)
	rgbRunning = false
	randomBtn.Text = "Randomize Pets"
	randomBtn.BackgroundColor3 = Color3.fromRGB(80, 130, 255)
	debounce = false
end)

-- Minimize / Restore
minBtn.MouseButton1Click:Connect(function()
	frame.Visible = false
	minimizedIcon.Visible = true
end)
minimizedIcon.MouseButton1Click:Connect(function()
	frame.Visible = true
	minimizedIcon.Visible = false
end)

exitBtn.MouseButton1Click:Connect(function()
	clearESP()
	gui:Destroy()
end)
