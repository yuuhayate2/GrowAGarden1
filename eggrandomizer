-- Kuni Hub | Grow A Garden Pet Predictor (Full GUI with Smooth Loading & Egg Info)
-- Author: Kuni | Optimized for All Executors

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- Hatch rates (July 2025)
local eggToPets = {
  ["Common Egg"] = {
    {name="Golden Lab", chance=33.33},
    {name="Dog", chance=33.33},
    {name="Bunny", chance=33.34},
  },
  ["Paradise Egg"] = {
    {name="Ostrich", chance=40},
    {name="Peacock", chance=30},
    {name="Capybara", chance=21},
    {name="Scarlet Macaw", chance=8},
    {name="Mimic Octopus", chance=1},
  },
  ["Oasis Egg"] = {
    {name="Meerkat", chance=45},
    {name="Sand Snake", chance=34.5},
    {name="Axolotl", chance=15},
    {name="Hyacinth Macaw", chance=5},
    {name="Fennec Fox", chance=0.5},
  },
  ["Dinosaur Egg"] = {
    {name="Raptor", chance=35},
    {name="Triceratops", chance=32.5},
    {name="Stegosaurus", chance=29},
    {name="Pterodactyl", chance=3},
    {name="Brontosaurus", chance=1},
    {name="T-Rex", chance=0.5},
  }
}

-- ESP Handler
local espList = {}
local function clearESP()
  for _, v in ipairs(espList) do if v and v.Parent then v:Destroy() end end
  espList = {}
end

local function getRandomPet(eggName)
  local pool = eggToPets[eggName]
  if pool then
    local total, cumulative = 0, 0
    for _, p in ipairs(pool) do total += p.chance end
    local r = math.random() * total
    for _, p in ipairs(pool) do
      cumulative += p.chance
      if r <= cumulative then
        return p.name .. " (" .. string.format("%.2f", p.chance) .. "%)"
      end
    end
  end
  return "Unknown"
end

local function createESP(part, petName)
  if part and not part:FindFirstChild("EggESP") then
    local gui = Instance.new("BillboardGui", part)
    gui.Name = "EggESP"
    gui.Size = UDim2.new(0, 100, 0, 40)
    gui.StudsOffset = Vector3.new(0, 2.5, 0)
    gui.AlwaysOnTop = true

    local label = Instance.new("TextLabel", gui)
    label.Size = UDim2.new(1, 0, 1, 0)
    label.BackgroundTransparency = 1
    label.Text = petName
    label.TextColor3 = Color3.new(1,1,1)
    label.Font = Enum.Font.Gotham
    label.TextScaled = true
    label.TextStrokeTransparency = 0.3
    label.TextTransparency = 1

    TweenService:Create(label, TweenInfo.new(1), {TextTransparency = 0}):Play()
    table.insert(espList, gui)
  end
end

local function randomizeEggs()
  clearESP()
  for _, obj in ipairs(workspace:GetDescendants()) do
    if obj:IsA("Model") and eggToPets[obj.Name] then
      local part = obj:FindFirstChildWhichIsA("BasePart")
      if part then createESP(part, getRandomPet(obj.Name)) end
    end
  end
end

-- Create Loading GUI
local loadingGui = Instance.new("ScreenGui", PlayerGui)
loadingGui.Name = "LoadingKuni"

local bg = Instance.new("Frame", loadingGui)
bg.Size = UDim2.new(1, 0, 1, 0)
bg.BackgroundColor3 = Color3.fromRGB(15, 15, 20)

local title = Instance.new("TextLabel", bg)
title.Size = UDim2.new(1, 0, 0, 60)
title.Position = UDim2.new(0, 0, 0.3, -60)
title.BackgroundTransparency = 1
title.Text = "Kuni Hub"
title.Font = Enum.Font.GothamBold
title.TextSize = 36
title.TextColor3 = Color3.new(1,1,1)
title.TextStrokeTransparency = 0.7
\local loadingText = Instance.new("TextLabel", bg)
loadingText.Size = UDim2.new(1, 0, 0, 40)
loadingText.Position = UDim2.new(0, 0, 0.3, 0)
loadingText.BackgroundTransparency = 1
loadingText.Text = "Loading Egg Predictor"
loadingText.Font = Enum.Font.Gotham
loadingText.TextSize = 22
loadingText.TextColor3 = Color3.new(1,1,1)

local percent = Instance.new("TextLabel", bg)
percent.Size = UDim2.new(1, 0, 0, 30)
percent.Position = UDim2.new(0, 0, 0.3, 40)
percent.Text = "0%"
percent.BackgroundTransparency = 1
percent.Font = Enum.Font.GothamBold
percent.TextColor3 = Color3.new(1,1,1)
percent.TextSize = 20

local barBg = Instance.new("Frame", bg)
barBg.Position = UDim2.new(0.3, 0, 0.5, 20)
barBg.Size = UDim2.new(0.4, 0, 0, 10)
barBg.BackgroundColor3 = Color3.fromRGB(50, 50, 60)

local barFill = Instance.new("Frame", barBg)
barFill.Size = UDim2.new(0, 0, 1, 0)
barFill.BackgroundColor3 = Color3.fromRGB(0, 170, 255)

-- Animate loading
spawn(function()
  local loadTime = 4
  local start = tick()
  while tick() - start < loadTime do
    local p = (tick() - start) / loadTime
    barFill.Size = UDim2.new(p, 0, 1, 0)
    percent.Text = math.floor(p * 100) .. "%"
    loadingText.Text = "Loading Egg Predictor" .. string.rep(".", math.floor((tick()*2)%4))
    RunService.RenderStepped:Wait()
  end
  percent.Text = "100%"
  barFill.Size = UDim2.new(1, 0, 1, 0)

  -- Smooth transition out
  TweenService:Create(bg, TweenInfo.new(1), {BackgroundTransparency = 1}):Play()
  TweenService:Create(title, TweenInfo.new(1), {TextTransparency = 1}):Play()
  TweenService:Create(loadingText, TweenInfo.new(1), {TextTransparency = 1}):Play()
  TweenService:Create(percent, TweenInfo.new(1), {TextTransparency = 1}):Play()
  TweenService:Create(barBg, TweenInfo.new(1), {BackgroundTransparency = 1}):Play()
  TweenService:Create(barFill, TweenInfo.new(1), {BackgroundTransparency = 1}):Play()
  wait(1.2)
  loadingGui:Destroy()
  showMainGUI()
end)

-- GUI Construction
function showMainGUI()
  local gui = Instance.new("ScreenGui", PlayerGui)
  gui.Name = "KuniHubGUI"

  local frame = Instance.new("Frame", gui)
  frame.Size = UDim2.new(0, 260, 0, 160)
  frame.Position = UDim2.new(0.02, 0, 0.4, 0)
  frame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
  frame.Active = true
  frame.Draggable = true

  local title = Instance.new("TextLabel", frame)
  title.Size = UDim2.new(1, -60, 0, 25)
  title.Position = UDim2.new(0, 5, 0, 5)
  title.Text = "Pet Predictor by Kuni"
  title.Font = Enum.Font.GothamBold
  title.TextColor3 = Color3.fromRGB(0, 200, 255)
  title.TextSize = 18
  title.BackgroundTransparency = 1

  local predict = Instance.new("TextButton", frame)
  predict.Size = UDim2.new(0.9, 0, 0, 35)
  predict.Position = UDim2.new(0.05, 0, 0, 40)
  predict.Text = "Predict Pets"
  predict.Font = Enum.Font.GothamBold
  predict.TextSize = 16
  predict.BackgroundColor3 = Color3.fromRGB(0, 120, 255)
  predict.TextColor3 = Color3.new(1,1,1)

  local egginfo = Instance.new("TextButton", frame)
  egginfo.Size = UDim2.new(0.9, 0, 0, 30)
  egginfo.Position = UDim2.new(0.05, 0, 0, 80)
  egginfo.Text = "Egg Info"
  egginfo.Font = Enum.Font.Gotham
  egginfo.TextSize = 15
  egginfo.BackgroundColor3 = Color3.fromRGB(255, 200, 0)
  egginfo.TextColor3 = Color3.new(0,0,0)

  local exit = Instance.new("TextButton", frame)
  exit.Size = UDim2.new(0, 20, 0, 20)
  exit.Position = UDim2.new(1, -22, 0, 2)
  exit.Text = "X"
  exit.BackgroundColor3 = Color3.fromRGB(200, 30, 30)
  exit.TextColor3 = Color3.new(1,1,1)
  exit.MouseButton1Click:Connect(function()
    gui:Destroy()
    clearESP()
  end)

  predict.MouseButton1Click:Connect(function()
    predict.Text = "Please wait..."
    randomizeEggs()
    wait(2)
    predict.Text = "Predict Pets"
  end)

  egginfo.MouseButton1Click:Connect(function()
    local eGui = Instance.new("ScreenGui", PlayerGui)
    eGui.Name = "EggInfo"
    local f = Instance.new("Frame", eGui)
    f.Size = UDim2.new(0, 320, 0, 300)
    f.Position = UDim2.new(0.5, -160, 0.5, -150)
    f.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
    f.Active = true
    f.Draggable = true

    local close = Instance.new("TextButton", f)
    close.Size = UDim2.new(0, 30, 0, 30)
    close.Position = UDim2.new(1, -35, 0, 5)
    close.Text = "X"
    close.BackgroundColor3 = Color3.fromRGB(200, 30, 30)
    close.TextColor3 = Color3.new(1,1,1)
    close.MouseButton1Click:Connect(function()
      eGui:Destroy()
    end)

    local scroll = Instance.new("ScrollingFrame", f)
    scroll.Size = UDim2.new(1, -10, 1, -40)
    scroll.Position = UDim2.new(0, 5, 0, 35)
    scroll.BackgroundTransparency = 1
    scroll.ScrollBarThickness = 6
    scroll.AutomaticCanvasSize = Enum.AutomaticSize.Y
    scroll.CanvasSize = UDim2.new(0, 0, 0, 0)

    local info = Instance.new("TextLabel", scroll)
    info.Size = UDim2.new(1, -10, 0, 0)
    info.BackgroundTransparency = 1
    info.Font = Enum.Font.Code
    info.TextSize = 16
    info.TextXAlignment = Enum.TextXAlignment.Left
    info.TextYAlignment = Enum.TextYAlignment.Top
    info.TextColor3 = Color3.new(1,1,1)
    info.Text = ""
    info.AutomaticSize = Enum.AutomaticSize.Y

    for egg, pets in pairs(eggToPets) do
      info.Text = info.Text .. egg .. "\n"
      for _, pet in ipairs(pets) do
        info.Text = info.Text .. "• "..pet.name.." – "..pet.chance.."%\n"
      end
      info.Text = info.Text .. "\n"
    end
  end)
end
